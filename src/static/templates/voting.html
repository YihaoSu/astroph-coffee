{% extends "base.html" %}

{% block pagetitle %}Vote on papers for {{ todays_date }}{% end %}

{% block pageheader %}

{% include "topbar-voting.html" %}

<div class="row">
  <div class="small-12 columns">
    <h1>Vote on papers for {{ todays_date }}</h1>
  </div>
</div>

{% end %}


{% block pagecontent %}

{% if local_articles or other_articles %}

<div class="row">
  <div class="small-12 columns">

    <ul class="inline-list">

      {% if local_articles and len(local_articles) > 1 %}
      <li><a href="#local-papers" class="button secondary radius"><strong>{{ len(local_articles) }}</strong> papers with local authors</a></li>
      {% elif local_articles and len(local_articles) == 1 %}
      <li><a href="#local-papers" class="button secondary radius"><strong>1</strong> paper with local authors</a></li>
      {% end %}

      <li><a href="#other-papers" class="button secondary radius"><strong>{{ len(other_articles) }}</strong> other papers</a></li>

    </ul>

  </div>
</div>

{% end %}


<div class="row">
  <div class="small-12 columns">

    {% if local_articles %}

    <h2 id="local-papers">Papers with local authors</h2>

    {% for article in local_articles %}

    <div class="row listing-row">

      {% if article[3] == 'astronomy' %}
      <div class="small-12 medium-8 columns">
      {% else %}
      <div class="small-12 medium-8 columns crosslist-article">
      {% end %}

        <div class="row">
          <div class="small-12 columns">
            <h3>{{ article[2] }}</h3>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <h6 class="subheader">{{ ', '.join((article[4].split(': ')[-1]).split(',')) }}</h6>
            {% if len(article[5]) > 0 %}
            <p><em>{% raw article[5] %}</em></p>
            {% end %}
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <p>{{ article[6] }}</p>
          </div>
        </div>

      </div>

      <div class="small-12 medium-4 columns text-center">

        {% if article[9] > 1 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            <strong>{{ article[9] }}</strong> votes
          </div>
        </div>
        {% elif article[9] == 1 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            <strong>{{ article[9] }}</strong> vote
          </div>
        </div>
        {% elif article[9] == 0 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            <strong>{{ article[9] }}</strong> votes
          </div>
        </div>
        {% end %}

        {% if len(article[11]) > 0 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            Presenters: <strong>{{ article[11] }}</strong>
          </div>
        </div>
        {% end %}

        <div class="row small-listing-row">
          <div class="small-12 columns">
            Paper {{ article[1] }} &mdash; <a href="{{ article[7] }}">{{ article[0] }}</a>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <a href="{{ article[8] }}"
               class="button success radius expand">
              Get paper PDF
            </a>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <a href="#" data-arxivid="{{ article[0] }}"
               class="button radius vote-button expand">
              Vote for this paper
            </a>
          </div>
        </div>

      </div>

    </div>

    {% end %}

    {% end %}



    {% if other_articles %}

    <h2 id="other-papers">All other papers</h2>

    {% for article in other_articles %}

    <div class="row listing-row">

      {% if article[3] == 'astronomy' %}
      <div class="small-12 medium-8 columns">
      {% else %}
      <div class="small-12 medium-8 columns crosslist-article">
      {% end %}

        <div class="row">
          <div class="small-12 columns">
            <h3 class="paper-title" data-arxivid="{{ article[0] }}"><a href="#" title="click to see/hide abstract">{{ article[2] }}</a></h3>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <h6 class="subheader">{{ ', '.join((article[4].split(': ')[-1]).split(',')) }}</h6>
            {% if len(article[5]) > 0 %}
            <p><em>{% raw article[5] %}</em></p>
            {% end %}
          </div>
        </div>

        <div class="row hide paper-abstract" data-arxivid="{{ article[0] }}">
          <div class="small-12 columns">
            <p>{{ article[6] }}</p>
          </div>
        </div>

      </div>

      <div class="small-12 medium-4 columns text-center">

        {% if article[9] > 1 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            <strong>{{ article[9] }}</strong> votes
          </div>
        </div>
        {% elif article[9] == 1 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            <strong>{{ article[9] }}</strong> vote
          </div>
        </div>
        {% elif article[9] == 0 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            <strong>{{ article[9] }}</strong> votes
          </div>
        </div>
        {% end %}

        {% if len(article[11]) > 0 %}
        <div class="row small-listing-row">
          <div class="small-12 columns">
            Presenters: <strong>{{ article[11] }}</strong>
          </div>
        </div>
        {% end %}

        <div class="row small-listing-row">
          <div class="small-12 columns">
            Paper {{ article[1] }} &mdash; <a href="{{ article[7] }}">{{ article[0] }}</a>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <a href="{{ article[8] }}"
               class="button success radius expand">
              Get paper PDF
            </a>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <a href="#" data-arxivid="{{ article[0] }}"
               class="button radius vote-button expand">
              Vote for this paper
            </a>
          </div>
        </div>

      </div>

    </div>

    {% end %}

    {% end %}


  </div>
</div>

{% end %}

{% block pagejs %}

<script src="/astroph-coffee/static/js/coffee.js"></script>

<script>
$(document).ready(function () {
  coffee.action_setup();
});
</script>

{% end %}
